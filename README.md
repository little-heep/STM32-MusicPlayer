# 🎵 DshanMCU-F103 音乐播放器 🎶

> 当嵌入式遇上音乐，STM32为你奏响科技的乐章！

## ✨ 项目简介

欢迎来到这个基于STM32的智能音乐播放器项目！这不仅仅是一个简单的蜂鸣器发声程序，而是一个集成了OLED显示、智能光控、多种播放模式的完整音乐系统。就像给你的开发板装上了一颗"音乐心脏"！💖

## 🎼 功能特色

### 🎵 音乐播放
- **蜂鸣器驱动**：让简单的蜂鸣器奏出美妙的旋律
- **双倍速模式**：环境变暗时自动切换到2倍速播放，感受不一样的音乐节奏！

### 🖥️ 炫酷显示
- **OLED实时信息**：清晰展示：
  - 🎶 当前歌曲名称
  - 🔢 歌曲序号（第几首）
  - 🔄 播放模式状态

### 🎮 智能控制
- **短按按键**：轻松切换下一首歌曲
- **长按按键**：智能切换播放模式：
  - 🔂 单曲循环 - 爱上某首歌？单曲循环到天荒地老！
  - ➡️ 顺序播放 - 享受完整的音乐旅程

### 🌗 环境感知
- **光敏电阻模块**：让播放器拥有"光感视觉"！
  - ☀️ 光线充足：正常1倍速播放
  - 🌙 环境变暗：自动切换2倍速，节奏感爆棚！

## 🛠️ 硬件配置

### 核心装备
- **主控**：STM32F103芯片
- **开发板**：DshanMCU-F103（韦东山瑞士军刀版）
- **显示**：OLED屏幕
- **发声**：有源蜂鸣器
- **传感**：光敏电阻模块
- **控制**：物理按键

### 连接方式
```
蜂鸣器   -> 指定GPIO引脚
OLED    -> I2C接口
光敏电阻 -> 外部中断引脚
按键     -> 外部中断引脚
```

## 🎯 播放模式详解

### 单曲循环 🔂
就像陷入了单曲循环的魔力，一首歌反复播放，直到你长按按键发出"换一个心情"的指令！

### 顺序播放 ➡️
像音乐电台一样，一首接一首，带你领略不同歌曲的魅力。短按可以"跳过"不喜欢的歌！

## 🌟 光控特色

这个播放器真的很"敏感"！光敏电阻让它能够感知环境光线的变化：

- **白天模式**：悠哉游哉的1倍速，享受原汁原味的旋律
- **夜晚模式**：激情澎湃的2倍速，让音乐节奏带你high起来！

## 🚀 快速开始

### 1. 环境准备
```c
// 确保你有：
// - Keil MDK 或 STM32CubeIDE
// - 对应的STM32F1xx HAL库
// - 一颗热爱音乐的心！❤️
```

### 2. 编译下载
```bash
在Keil中打开项目后即可编译下载
```

### 3. 开始享受！
- 上电即播，音乐响起！
- 尝试用手遮挡光敏电阻，感受速度变化
- 短按/长按按键，体验完整功能

## 🎹 音乐库扩展

想要添加更多歌曲？只需在代码中扩展你的音乐数组：

```c
在 sheet_music.c 中
int* melodys[] = {
    // 你的音符数据在这里...
};
int* rhythms[]={
    //每个音符对应的节拍在这里...
};
int musicsize[]={
    //添加你的音乐数组的大小
};
int durationtime[]={
    //添加你的音乐数组每个音符所需要的时间，这决定你的曲子是欢快还是悠长
};

在 song_name.c 中
uint8_t songname[][][]={
  {
    //你的乐曲名的字模在这里...
  }
}
```

## 🔧 技术亮点

- ✅ 精确的节奏控制算法  
- ✅ 平滑的OLED显示刷新
- ✅ 灵敏的光线检测
- ✅ 可靠的按键去抖处理
- ✅ 低功耗设计理念

## 🤝 贡献与改进

发现bug？有更好的想法？欢迎提交Issue或Pull Request！让我们一起让这个音乐播放器变得更棒！

---

> 💡 **小贴士**：这个项目不仅是一个功能完整的播放器，更是学习STM32外设驱动、传感器应用的绝佳范例！

---
**让代码歌唱，让硬件起舞！** 🎉🎊

*—— 用STM32奏响嵌入式开发的华美乐章*
